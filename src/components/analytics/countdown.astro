---
import Analytics from '~/components/widgets/analytics.astro';
---

<Analytics

	id="countdown"
	title="Công cụ đếm ngược giao thừa 2026"
	description="Hướng dẫn: Bạn cần biết thông tin giao thừa 2026 còn bao nhiêu ngày? Dưới đây là câu trả lời dành cho bạn."

	inputType="hidden"
	outputType="text"

	placeholder="Thông tin giao thừa 2026 còn bao nhiêu ngày? sẽ hiển thị ở đây."
	debounceTime={1000}

/>

<script client:load>

	document.addEventListener('DOMContentLoaded', () => {
		const resultOutput = document.getElementById('countdown-text-output');
		
		function padNumber(num) {
			return num < 10 ? `0${num}` : num;
		}

		function updateCountdown() {
			const now = new Date();
			const newYear = new Date(2026, 0, 1, 0, 0, 0);
			const diff = newYear - now;

			if (diff < 0) {
				resultOutput.textContent = "Chúc mừng năm mới!";
				return;
			}

			const totalSeconds = Math.floor(diff / 1000);
			const totalMinutes = Math.floor(totalSeconds / 60);
			const totalHours = Math.floor(totalMinutes / 60);
			const totalDays = Math.floor(totalHours / 24);

			const years = Math.floor(totalDays / 365);
			const months = Math.floor((totalDays % 365) / 30);
			const days = totalDays % 30;
			const hours = totalHours % 24;
			const minutes = totalMinutes % 60;
			const seconds = totalSeconds % 60;

			let result = "Còn ";
			if (days > 0) result += `${padNumber(days)} ngày `;
			if (months > 0) result += `${padNumber(months)} tháng `;
			if (years > 0) result += `${padNumber(years)} năm `;
			if (hours > 0) result += `${padNumber(hours)} giờ `;
			if (minutes > 0) result += `${padNumber(minutes)} phút `;
			if (seconds > 0) result += `${padNumber(seconds)} giây `,

			result += "là đến giao thừa 2026.";

			resultOutput.textContent = result;
		}

		updateCountdown();

		setInterval(updateCountdown, 1000);
	});

</script>