<button id="scrollon" title="Lên đầu trang"></button>

<script>
	document.addEventListener("DOMContentLoaded", function() {
		const scrollon = document.getElementById("scrollon");
		const contentElement = document.querySelector(".prose");
		
		function checkContentVisibility() {
			if (!contentElement) return false;
			
			const contentRect = contentElement.getBoundingClientRect();
			const windowHeight = window.innerHeight;
			
			const isContentVisible = contentRect.top < windowHeight && contentRect.bottom > 0;
			const hasScrolledPastContent = contentRect.top < 0;
			const hasNotScrolledPastEnd = contentRect.bottom > 500;
			
			return isContentVisible && hasScrolledPastContent && hasNotScrolledPastEnd;
		}
		
		function updateScrollProgress() {
			const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
			const scrolled = window.scrollY;
			const progress = Math.min(100, Math.max(0, (scrolled / scrollableHeight) * 100));
			
			const progressColor = "rgb(255, 114, 94)";
			const bgColor = "rgba(255, 114, 94, 0.3)";
			
			scrollon.style.background = `conic-gradient(${progressColor} ${progress}%, ${bgColor} ${progress}% 100%)`;
		}
		
		window.onscroll = function() {

			updateScrollProgress();
			
			if (checkContentVisibility()) {
				scrollon.style.display = "block";
			} else {
				scrollon.style.display = "none";
			}
		};
		
		setTimeout(function() {
			window.onscroll();
		}, 100);
		
		scrollon.addEventListener("click", function() {
			window.scrollTo({
				top: 0,
				behavior: "smooth"
			});
		});
	});

</script>