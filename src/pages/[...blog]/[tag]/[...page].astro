---
import type { InferGetStaticPropsType, GetStaticPaths } from 'astro';
import { blogTagRobots, getStaticPathsBlogTag } from '~/utils/blog';

import Layout from '~/layouts/page-layout.astro';
import BlogList from '~/components/blog/list.astro';
import Headline from '~/components/blog/headline.astro';
import Pagination from '~/components/blog/pagination.astro';

import Features from '~/components/widgets/features.astro';

export const prerender = true;

export const getStaticPaths = (async ({ paginate }) =>{
	return await getStaticPathsBlogTag({ paginate });
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page, tag } = Astro.props as Props;

const currentPage = page.currentPage ?? 1;

const metadata = {
	title: `Danh sách bài viết theo thẻ ${tag}${currentPage >1 ? ` | Trang ${currentPage} ` : ''}`,
	robots: {
		index: blogTagRobots?.index,
		follow: blogTagRobots?.follow,
	},
};
---

<Layout metadata={metadata}>
	<section class="px-4 md:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">

		<Headline>Thẻ bài: {tag}.</Headline>

		<BlogList posts={page.data}/>

		<Pagination prevUrl={page.url.prev} nextUrl={page.url.next}/>
	</section>

	<Features
		title="Luôn sẵn sàng hỗ trợ khi bạn cần"
		items={[
			{
				title: 'Hỗ trợ nhanh',
				description: `Bạn có thể liên lạc trực tiếp với nhavantuonglai qua số hotline đính kèm dưới đây, hoặc Instagram nếu không thích nghe điện thoại cho bất kỳ vấn đề, rắc rối nào phát sinh trong quá trình đọc lẫn trong cuộc sống của bạn.`,
			},
			{
				title: 'Hỗ trợ chuyên nghiệp',
				description: 'Bạn có thể viết thư và gửi theo địa chỉ đính kèm dưới đây trong trường hợp cần trao đổi chi tiết, chuyên nghiệp về vấn đề bản thân, hợp tác đôi bên hoặc bất kỳ thắc mắc nào muốn được trao đổi chi tiết.',
			},
			{
				title: 'Hỗ trợ trực tiếp',
				description: 'Bạn có thể đề xuất buổi hẹn gặp trực tiếp trong trường hợp cho rằng vấn đề cần trao đổi chỉ có thể làm rõ thông qua đối thoại trực tiếp. Hãy liên hệ với nhavantuonglai theo các thông tin đính kèm dưới đây để sắp xếp.',
			},
			{
				title: 'Hotline',
				description: '+84 88 686 7749',
				icon: 'tabler:headset',
			},
			{
				title: 'Email cá nhân',
				description: 'info@nhavantuonglai.com',
				icon: 'tabler:mail',
			},
			{
				title: 'Địa chỉ',
				description: 'Da Nang | Hue',
				icon: 'tabler:map-pin',
			},
		]}
	/>

</Layout>
